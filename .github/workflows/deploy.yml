name: Deploy VitePress site to Pages

     on:
       push:
         branches: [main]

     jobs:
       build:
         runs-on: ubuntu-latest
         steps:
           - uses: actions/checkout@v3
           - uses: actions/setup-node@v3
             with:
               node-version: 18
           - run: npm install -g pnpm
           - run: pnpm install
           - run: pnpm run docs:build
           - uses: actions/upload-pages-artifact@v1
             with:
               path: docs/.vitepress/dist

       deploy:
         needs: build
         permissions:
           pages: write
           id-token: write
         environment:
           name: github-pages
           url: ${{ steps.deployment.outputs.page_url }}
         runs-on: ubuntu-latest
         steps:
           - uses: actions/deploy-pages@v1